"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/makelisting";
exports.ids = ["pages/api/makelisting"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "next-auth/react":
/*!**********************************!*\
  !*** external "next-auth/react" ***!
  \**********************************/
/***/ ((module) => {

module.exports = require("next-auth/react");

/***/ }),

/***/ "(api)/./db/prismaDb.ts":
/*!************************!*\
  !*** ./db/prismaDb.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"prisma\": () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst globalForPrisma = global;\nconst prisma = globalForPrisma.prisma || new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient();\nif (true) globalForPrisma.prisma = prisma;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9kYi9wcmlzbWFEYi50cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBOEM7QUFFOUMsTUFBTUMsa0JBQWtCQztBQUVqQixNQUFNQyxTQUFTRixnQkFBZ0JFLE1BQU0sSUFBSSxJQUFJSCx3REFBWUEsR0FBRztBQUVuRSxJQUFJSSxJQUFxQyxFQUFFSCxnQkFBZ0JFLE1BQU0sR0FBR0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ia3NuLXByaXNtYS10ZXN0Ly4vZGIvcHJpc21hRGIudHM/MDU0MiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQcmlzbWFDbGllbnQgfSBmcm9tIFwiQHByaXNtYS9jbGllbnRcIjtcblxuY29uc3QgZ2xvYmFsRm9yUHJpc21hID0gZ2xvYmFsIGFzIHVua25vd24gYXMgeyBwcmlzbWE6IFByaXNtYUNsaWVudCB9O1xuXG5leHBvcnQgY29uc3QgcHJpc21hID0gZ2xvYmFsRm9yUHJpc21hLnByaXNtYSB8fCBuZXcgUHJpc21hQ2xpZW50KCk7XG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIGdsb2JhbEZvclByaXNtYS5wcmlzbWEgPSBwcmlzbWE7XG4iXSwibmFtZXMiOlsiUHJpc21hQ2xpZW50IiwiZ2xvYmFsRm9yUHJpc21hIiwiZ2xvYmFsIiwicHJpc21hIiwicHJvY2VzcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./db/prismaDb.ts\n");

/***/ }),

/***/ "(api)/./pages/api/makelisting.js":
/*!**********************************!*\
  !*** ./pages/api/makelisting.js ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _db_prismaDb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../db/prismaDb */ \"(api)/./db/prismaDb.ts\");\n/* harmony import */ var _utils_middleware__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utils/middleware */ \"(api)/./utils/middleware.js\");\n\n\nconst createListing = async (userId, listing)=>{\n    const { sku , title , isbn , author , condition , format , notes , price  } = listing;\n    return _db_prismaDb__WEBPACK_IMPORTED_MODULE_0__.prisma.listing.create({\n        data: {\n            owner: {\n                connect: {\n                    id: userId\n                }\n            },\n            sku: sku,\n            title: title,\n            isbn: `${isbn}`,\n            author: author,\n            condition,\n            format,\n            notes,\n            price,\n            free_shipping: false,\n            shipping_price: 1.99\n        }\n    });\n};\nconst handler = async (req, res)=>{\n    const [userEmail, listingsToAdd, updateInventory] = JSON.parse(req.body);\n    // Fetch the user by email\n    const user = await _db_prismaDb__WEBPACK_IMPORTED_MODULE_0__.prisma.user.findUnique({\n        where: {\n            email: userEmail\n        }\n    });\n    // Check if the user exists\n    if (!user) {\n        res.status(404).json({\n            error: \"User not found\"\n        });\n        return;\n    }\n    if (updateInventory) {\n        // Handle updating inventory\n        // First, fetch all existing listings for the user\n        const existingListings = await _db_prismaDb__WEBPACK_IMPORTED_MODULE_0__.prisma.listing.findMany({\n            where: {\n                ownerId: user.id\n            }\n        });\n        // Delete listings not in the CSV file\n        existingListings.forEach(async (listing)=>{\n            const listingInFile = listingsToAdd.some((csvListing)=>csvListing.sku === listing.sku);\n            if (!listingInFile) {\n                await _db_prismaDb__WEBPACK_IMPORTED_MODULE_0__.prisma.listing[\"delete\"]({\n                    where: {\n                        id: listing.id\n                    }\n                });\n            }\n        });\n        // Add listings from the CSV file if they don't already exist\n        listingsToAdd.forEach(async (listing)=>{\n            const listingExists = existingListings.some((existingListing)=>existingListing.sku === listing.sku);\n            if (!listingExists) {\n                await createListing(user.id, listing);\n            }\n        });\n    } else {\n        // Handle adding listings without updating inventory\n        listingsToAdd.forEach(async (listing)=>{\n            await createListing(user.id, listing);\n        });\n    }\n    res.status(200).json({\n        success: \"Listings updated successfully\"\n    });\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (async (req, res)=>{\n    await (0,_utils_middleware__WEBPACK_IMPORTED_MODULE_1__.auth)(req, res, async ()=>{\n        await (0,_utils_middleware__WEBPACK_IMPORTED_MODULE_1__.requireRole)([\n            \"SUBSCRIBED_USER\"\n        ])(req, res, async ()=>{\n            await handler(req, res);\n        });\n    });\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvbWFrZWxpc3RpbmcuanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQTJDO0FBQ2dCO0FBRTNELE1BQU1HLGdCQUFnQixPQUFPQyxRQUFRQyxVQUFZO0lBQy9DLE1BQU0sRUFDSkMsSUFBRyxFQUNIQyxNQUFLLEVBQ0xDLEtBQUksRUFDSkMsT0FBTSxFQUNOQyxVQUFTLEVBQ1RDLE9BQU0sRUFDTkMsTUFBSyxFQUNMQyxNQUFLLEVBR04sR0FBR1I7SUFDSixPQUFPTCwrREFBcUIsQ0FBQztRQUMzQmUsTUFBTTtZQUNKQyxPQUFPO2dCQUNMQyxTQUFTO29CQUNQQyxJQUFJZDtnQkFDTjtZQUNGO1lBQ0FFLEtBQUtBO1lBQ0xDLE9BQU9BO1lBQ1BDLE1BQU0sQ0FBQyxFQUFFQSxLQUFLLENBQUM7WUFDZkMsUUFBUUE7WUFDUkM7WUFDQUM7WUFDQUM7WUFDQUM7WUFDQU0sZUFBZSxLQUFLO1lBQ3BCQyxnQkFBZ0I7UUFDbEI7SUFDRjtBQUNGO0FBRUEsTUFBTUMsVUFBVSxPQUFPQyxLQUFLQyxNQUFRO0lBQ2xDLE1BQU0sQ0FBQ0MsV0FBV0MsZUFBZUMsZ0JBQWdCLEdBQUdDLEtBQUtDLEtBQUssQ0FBQ04sSUFBSU8sSUFBSTtJQUV2RSwwQkFBMEI7SUFDMUIsTUFBTUMsT0FBTyxNQUFNOUIsZ0VBQXNCLENBQUM7UUFDeENnQyxPQUFPO1lBQ0xDLE9BQU9UO1FBQ1Q7SUFDRjtJQUVBLDJCQUEyQjtJQUMzQixJQUFJLENBQUNNLE1BQU07UUFDVFAsSUFBSVcsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUFFQyxPQUFPO1FBQWlCO1FBQy9DO0lBQ0YsQ0FBQztJQUVELElBQUlWLGlCQUFpQjtRQUNuQiw0QkFBNEI7UUFDNUIsa0RBQWtEO1FBQ2xELE1BQU1XLG1CQUFtQixNQUFNckMsaUVBQXVCLENBQUM7WUFDckRnQyxPQUFPO2dCQUNMTyxTQUFTVCxLQUFLWixFQUFFO1lBQ2xCO1FBQ0Y7UUFFQSxzQ0FBc0M7UUFDdENtQixpQkFBaUJHLE9BQU8sQ0FBQyxPQUFPbkMsVUFBWTtZQUMxQyxNQUFNb0MsZ0JBQWdCaEIsY0FBY2lCLElBQUksQ0FDdEMsQ0FBQ0MsYUFBZUEsV0FBV3JDLEdBQUcsS0FBS0QsUUFBUUMsR0FBRztZQUVoRCxJQUFJLENBQUNtQyxlQUFlO2dCQUNsQixNQUFNekMsa0VBQXFCLENBQUM7b0JBQzFCZ0MsT0FBTzt3QkFDTGQsSUFBSWIsUUFBUWEsRUFBRTtvQkFDaEI7Z0JBQ0Y7WUFDRixDQUFDO1FBQ0g7UUFFQSw2REFBNkQ7UUFDN0RPLGNBQWNlLE9BQU8sQ0FBQyxPQUFPbkMsVUFBWTtZQUN2QyxNQUFNd0MsZ0JBQWdCUixpQkFBaUJLLElBQUksQ0FDekMsQ0FBQ0ksa0JBQW9CQSxnQkFBZ0J4QyxHQUFHLEtBQUtELFFBQVFDLEdBQUc7WUFFMUQsSUFBSSxDQUFDdUMsZUFBZTtnQkFDbEIsTUFBTTFDLGNBQWMyQixLQUFLWixFQUFFLEVBQUViO1lBQy9CLENBQUM7UUFDSDtJQUNGLE9BQU87UUFDTCxvREFBb0Q7UUFDcERvQixjQUFjZSxPQUFPLENBQUMsT0FBT25DLFVBQVk7WUFDdkMsTUFBTUYsY0FBYzJCLEtBQUtaLEVBQUUsRUFBRWI7UUFDL0I7SUFDRixDQUFDO0lBRURrQixJQUFJVyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1FBQUVZLFNBQVM7SUFBZ0M7QUFDbEU7QUFFQSxpRUFBZSxPQUFPekIsS0FBS0MsTUFBUTtJQUNqQyxNQUFNdEIsdURBQUlBLENBQUNxQixLQUFLQyxLQUFLLFVBQVk7UUFDL0IsTUFBTXJCLDhEQUFXQSxDQUFDO1lBQUM7U0FBa0IsRUFBRW9CLEtBQUtDLEtBQUssVUFBWTtZQUMzRCxNQUFNRixRQUFRQyxLQUFLQztRQUNyQjtJQUNGO0FBQ0YsR0FBRSIsInNvdXJjZXMiOlsid2VicGFjazovL2Jrc24tcHJpc21hLXRlc3QvLi9wYWdlcy9hcGkvbWFrZWxpc3RpbmcuanM/NzE2ZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBwcmlzbWEgfSBmcm9tIFwiLi4vLi4vZGIvcHJpc21hRGJcIjtcbmltcG9ydCB7IGF1dGgsIHJlcXVpcmVSb2xlIH0gZnJvbSBcIi4uLy4uL3V0aWxzL21pZGRsZXdhcmVcIjtcblxuY29uc3QgY3JlYXRlTGlzdGluZyA9IGFzeW5jICh1c2VySWQsIGxpc3RpbmcpID0+IHtcbiAgY29uc3Qge1xuICAgIHNrdSxcbiAgICB0aXRsZSxcbiAgICBpc2JuLFxuICAgIGF1dGhvcixcbiAgICBjb25kaXRpb24sXG4gICAgZm9ybWF0LFxuICAgIG5vdGVzLFxuICAgIHByaWNlLFxuICAgIC8vZnJlZV9zaGlwcGluZyxcbiAgICAvL3NoaXBwaW5nX3ByaWNlLFxuICB9ID0gbGlzdGluZztcbiAgcmV0dXJuIHByaXNtYS5saXN0aW5nLmNyZWF0ZSh7XG4gICAgZGF0YToge1xuICAgICAgb3duZXI6IHtcbiAgICAgICAgY29ubmVjdDoge1xuICAgICAgICAgIGlkOiB1c2VySWQsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAgc2t1OiBza3UsXG4gICAgICB0aXRsZTogdGl0bGUsXG4gICAgICBpc2JuOiBgJHtpc2JufWAsXG4gICAgICBhdXRob3I6IGF1dGhvcixcbiAgICAgIGNvbmRpdGlvbixcbiAgICAgIGZvcm1hdCxcbiAgICAgIG5vdGVzLFxuICAgICAgcHJpY2UsXG4gICAgICBmcmVlX3NoaXBwaW5nOiBmYWxzZSxcbiAgICAgIHNoaXBwaW5nX3ByaWNlOiAxLjk5LFxuICAgIH0sXG4gIH0pO1xufTtcblxuY29uc3QgaGFuZGxlciA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICBjb25zdCBbdXNlckVtYWlsLCBsaXN0aW5nc1RvQWRkLCB1cGRhdGVJbnZlbnRvcnldID0gSlNPTi5wYXJzZShyZXEuYm9keSk7XG5cbiAgLy8gRmV0Y2ggdGhlIHVzZXIgYnkgZW1haWxcbiAgY29uc3QgdXNlciA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRVbmlxdWUoe1xuICAgIHdoZXJlOiB7XG4gICAgICBlbWFpbDogdXNlckVtYWlsLFxuICAgIH0sXG4gIH0pO1xuXG4gIC8vIENoZWNrIGlmIHRoZSB1c2VyIGV4aXN0c1xuICBpZiAoIXVzZXIpIHtcbiAgICByZXMuc3RhdHVzKDQwNCkuanNvbih7IGVycm9yOiBcIlVzZXIgbm90IGZvdW5kXCIgfSk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKHVwZGF0ZUludmVudG9yeSkge1xuICAgIC8vIEhhbmRsZSB1cGRhdGluZyBpbnZlbnRvcnlcbiAgICAvLyBGaXJzdCwgZmV0Y2ggYWxsIGV4aXN0aW5nIGxpc3RpbmdzIGZvciB0aGUgdXNlclxuICAgIGNvbnN0IGV4aXN0aW5nTGlzdGluZ3MgPSBhd2FpdCBwcmlzbWEubGlzdGluZy5maW5kTWFueSh7XG4gICAgICB3aGVyZToge1xuICAgICAgICBvd25lcklkOiB1c2VyLmlkLFxuICAgICAgfSxcbiAgICB9KTtcblxuICAgIC8vIERlbGV0ZSBsaXN0aW5ncyBub3QgaW4gdGhlIENTViBmaWxlXG4gICAgZXhpc3RpbmdMaXN0aW5ncy5mb3JFYWNoKGFzeW5jIChsaXN0aW5nKSA9PiB7XG4gICAgICBjb25zdCBsaXN0aW5nSW5GaWxlID0gbGlzdGluZ3NUb0FkZC5zb21lKFxuICAgICAgICAoY3N2TGlzdGluZykgPT4gY3N2TGlzdGluZy5za3UgPT09IGxpc3Rpbmcuc2t1XG4gICAgICApO1xuICAgICAgaWYgKCFsaXN0aW5nSW5GaWxlKSB7XG4gICAgICAgIGF3YWl0IHByaXNtYS5saXN0aW5nLmRlbGV0ZSh7XG4gICAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICAgIGlkOiBsaXN0aW5nLmlkLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gQWRkIGxpc3RpbmdzIGZyb20gdGhlIENTViBmaWxlIGlmIHRoZXkgZG9uJ3QgYWxyZWFkeSBleGlzdFxuICAgIGxpc3RpbmdzVG9BZGQuZm9yRWFjaChhc3luYyAobGlzdGluZykgPT4ge1xuICAgICAgY29uc3QgbGlzdGluZ0V4aXN0cyA9IGV4aXN0aW5nTGlzdGluZ3Muc29tZShcbiAgICAgICAgKGV4aXN0aW5nTGlzdGluZykgPT4gZXhpc3RpbmdMaXN0aW5nLnNrdSA9PT0gbGlzdGluZy5za3VcbiAgICAgICk7XG4gICAgICBpZiAoIWxpc3RpbmdFeGlzdHMpIHtcbiAgICAgICAgYXdhaXQgY3JlYXRlTGlzdGluZyh1c2VyLmlkLCBsaXN0aW5nKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICAvLyBIYW5kbGUgYWRkaW5nIGxpc3RpbmdzIHdpdGhvdXQgdXBkYXRpbmcgaW52ZW50b3J5XG4gICAgbGlzdGluZ3NUb0FkZC5mb3JFYWNoKGFzeW5jIChsaXN0aW5nKSA9PiB7XG4gICAgICBhd2FpdCBjcmVhdGVMaXN0aW5nKHVzZXIuaWQsIGxpc3RpbmcpO1xuICAgIH0pO1xuICB9XG5cbiAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBzdWNjZXNzOiBcIkxpc3RpbmdzIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5XCIgfSk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgYXdhaXQgYXV0aChyZXEsIHJlcywgYXN5bmMgKCkgPT4ge1xuICAgIGF3YWl0IHJlcXVpcmVSb2xlKFtcIlNVQlNDUklCRURfVVNFUlwiXSkocmVxLCByZXMsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IGhhbmRsZXIocmVxLCByZXMpO1xuICAgIH0pO1xuICB9KTtcbn07XG4iXSwibmFtZXMiOlsicHJpc21hIiwiYXV0aCIsInJlcXVpcmVSb2xlIiwiY3JlYXRlTGlzdGluZyIsInVzZXJJZCIsImxpc3RpbmciLCJza3UiLCJ0aXRsZSIsImlzYm4iLCJhdXRob3IiLCJjb25kaXRpb24iLCJmb3JtYXQiLCJub3RlcyIsInByaWNlIiwiY3JlYXRlIiwiZGF0YSIsIm93bmVyIiwiY29ubmVjdCIsImlkIiwiZnJlZV9zaGlwcGluZyIsInNoaXBwaW5nX3ByaWNlIiwiaGFuZGxlciIsInJlcSIsInJlcyIsInVzZXJFbWFpbCIsImxpc3RpbmdzVG9BZGQiLCJ1cGRhdGVJbnZlbnRvcnkiLCJKU09OIiwicGFyc2UiLCJib2R5IiwidXNlciIsImZpbmRVbmlxdWUiLCJ3aGVyZSIsImVtYWlsIiwic3RhdHVzIiwianNvbiIsImVycm9yIiwiZXhpc3RpbmdMaXN0aW5ncyIsImZpbmRNYW55Iiwib3duZXJJZCIsImZvckVhY2giLCJsaXN0aW5nSW5GaWxlIiwic29tZSIsImNzdkxpc3RpbmciLCJkZWxldGUiLCJsaXN0aW5nRXhpc3RzIiwiZXhpc3RpbmdMaXN0aW5nIiwic3VjY2VzcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./pages/api/makelisting.js\n");

/***/ }),

/***/ "(api)/./utils/middleware.js":
/*!*****************************!*\
  !*** ./utils/middleware.js ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"auth\": () => (/* binding */ auth),\n/* harmony export */   \"requireRole\": () => (/* binding */ requireRole)\n/* harmony export */ });\n/* harmony import */ var _db_prismaDb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../db/prismaDb */ \"(api)/./db/prismaDb.ts\");\n/* harmony import */ var next_auth_react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-auth/react */ \"next-auth/react\");\n/* harmony import */ var next_auth_react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_auth_react__WEBPACK_IMPORTED_MODULE_1__);\n\n\nasync function auth(req, res, next) {\n    const session = await (0,next_auth_react__WEBPACK_IMPORTED_MODULE_1__.getSession)({\n        req\n    });\n    if (!session) {\n        res.status(401).json({\n            message: \"Not authenticated\"\n        });\n        return;\n    }\n    const user = await _db_prismaDb__WEBPACK_IMPORTED_MODULE_0__.prisma.user.findUnique({\n        where: {\n            email: session.user.email\n        }\n    });\n    if (!user) {\n        res.status(401).json({\n            message: \"User not found\"\n        });\n        return;\n    }\n    req.user = user;\n    next();\n}\nfunction requireRole(allowedRoles) {\n    return (req, res, next)=>{\n        if (!allowedRoles.includes(req.user.role)) {\n            res.status(403).json({\n                message: \"Forbidden: insufficient permissions\"\n            });\n            return;\n        }\n        next();\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi91dGlscy9taWRkbGV3YXJlLmpzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQXdDO0FBQ0s7QUFFdEMsZUFBZUUsS0FBS0MsR0FBRyxFQUFFQyxHQUFHLEVBQUVDLElBQUksRUFBRTtJQUN6QyxNQUFNQyxVQUFVLE1BQU1MLDJEQUFVQSxDQUFDO1FBQUVFO0lBQUk7SUFFdkMsSUFBSSxDQUFDRyxTQUFTO1FBQ1pGLElBQUlHLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFBRUMsU0FBUztRQUFvQjtRQUNwRDtJQUNGLENBQUM7SUFFRCxNQUFNQyxPQUFPLE1BQU1WLGdFQUFzQixDQUFDO1FBQ3hDWSxPQUFPO1lBQUVDLE9BQU9QLFFBQVFJLElBQUksQ0FBQ0csS0FBSztRQUFDO0lBQ3JDO0lBRUEsSUFBSSxDQUFDSCxNQUFNO1FBQ1ROLElBQUlHLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFBRUMsU0FBUztRQUFpQjtRQUNqRDtJQUNGLENBQUM7SUFFRE4sSUFBSU8sSUFBSSxHQUFHQTtJQUNYTDtBQUNGLENBQUM7QUFFTSxTQUFTUyxZQUFZQyxZQUFZLEVBQUU7SUFDeEMsT0FBTyxDQUFDWixLQUFLQyxLQUFLQyxPQUFTO1FBQ3pCLElBQUksQ0FBQ1UsYUFBYUMsUUFBUSxDQUFDYixJQUFJTyxJQUFJLENBQUNPLElBQUksR0FBRztZQUN6Q2IsSUFBSUcsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztnQkFBRUMsU0FBUztZQUFzQztZQUN0RTtRQUNGLENBQUM7UUFFREo7SUFDRjtBQUNGLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ia3NuLXByaXNtYS10ZXN0Ly4vdXRpbHMvbWlkZGxld2FyZS5qcz8yMmM5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHByaXNtYSB9IGZyb20gXCIuLi9kYi9wcmlzbWFEYlwiO1xuaW1wb3J0IHsgZ2V0U2Vzc2lvbiB9IGZyb20gXCJuZXh0LWF1dGgvcmVhY3RcIjtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGF1dGgocmVxLCByZXMsIG5leHQpIHtcbiAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGdldFNlc3Npb24oeyByZXEgfSk7XG5cbiAgaWYgKCFzZXNzaW9uKSB7XG4gICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiBcIk5vdCBhdXRoZW50aWNhdGVkXCIgfSk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgY29uc3QgdXNlciA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRVbmlxdWUoe1xuICAgIHdoZXJlOiB7IGVtYWlsOiBzZXNzaW9uLnVzZXIuZW1haWwgfSxcbiAgfSk7XG5cbiAgaWYgKCF1c2VyKSB7XG4gICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiBcIlVzZXIgbm90IGZvdW5kXCIgfSk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgcmVxLnVzZXIgPSB1c2VyO1xuICBuZXh0KCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZXF1aXJlUm9sZShhbGxvd2VkUm9sZXMpIHtcbiAgcmV0dXJuIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgIGlmICghYWxsb3dlZFJvbGVzLmluY2x1ZGVzKHJlcS51c2VyLnJvbGUpKSB7XG4gICAgICByZXMuc3RhdHVzKDQwMykuanNvbih7IG1lc3NhZ2U6IFwiRm9yYmlkZGVuOiBpbnN1ZmZpY2llbnQgcGVybWlzc2lvbnNcIiB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBuZXh0KCk7XG4gIH07XG59XG4iXSwibmFtZXMiOlsicHJpc21hIiwiZ2V0U2Vzc2lvbiIsImF1dGgiLCJyZXEiLCJyZXMiLCJuZXh0Iiwic2Vzc2lvbiIsInN0YXR1cyIsImpzb24iLCJtZXNzYWdlIiwidXNlciIsImZpbmRVbmlxdWUiLCJ3aGVyZSIsImVtYWlsIiwicmVxdWlyZVJvbGUiLCJhbGxvd2VkUm9sZXMiLCJpbmNsdWRlcyIsInJvbGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./utils/middleware.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = (__webpack_exec__("(api)/./pages/api/makelisting.js"));
module.exports = __webpack_exports__;

})();